<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Continuous Delivery in Booktrack</title>

		<meta name="description" content="Using azure it is easy to publish SPA">
		<meta name="author" content="Konstantin Raev, Richard Sentino">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="bower_components/reveal.js/css/reveal.min.css">
		<link rel="stylesheet" href="bower_components/reveal.js/css/theme/sky.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="bower_components/reveal.js/lib/css/zenburn.css">
	</head>

	<body>

		<div class="reveal">
			<div class="slides">
				<section data-background="images/website.png">
					<h1 style="color: white; background-color: rgba(19, 43, 55, 0.70)">Continuous deployment of a Single Page Application on Azure</h1>
				</section>
                <section>
                    <h3>Part of dev team @ Booktrack</h3>
                    <ul>
                        <li>
                            <p><img width="100px" height="100px" src="images/bestander.jpeg"> Konstantin Raev</p>
                            <p><a href="https://twitter.com/bestander_nz">@bestander_nz</a></p>
                            <p><a href="https://github.com/bestander">github/bestander</a></p>
                        </li>
                        <li>
                            <p><img width="100px" height="100px" src="images/rixrix.jpeg"> Richard Sentino</p>
                            <p><a href="https://twitter.com/mindginative">@mindginative</a></p>
                            <p><a href="https://github.com/rixrix">github/rixrix</a></p>
                        </li>
                    </ul>
                </section>
                <section data-background="images/platforms.png">
                </section>
                <section>
                    <p><img src="images/hypno.gif"></p>
                    visit <a target="_blank" href="http://www.booktrack.com">www.booktrack.com</a>
                </section>
				<section>
					<section>
						<h2>Our front end stack</h2>
                        <h4>defeating complexity with abstractions</h4>
                        <ul>
                            <li>Angular.js</li>
                            <li>Typescript</li>
                            <li>CSS Preprocessors</li>
                            <li>Bower</li>
                        </ul>
					</section>
                    <section>
                        <h3>Angular.js</h3>
                        <img src="images/angular_example.png">
                    </section>
                    <section>
                        <img src="images/anglar-dir-js.png">
                    </section>
                    <section>
                        <h2>Typescript</h2>
						<h3>A superset of EcmaScript 6 with compile time type checking</h3>
                        <img class="stretch" src="images/typescript-classes.png">
					</section>
                    <section>
                        <img class="stretch" src="images/typescript-module.png">
					</section>
                    <section>
                        <img class="stretch" src="images/typescript-compiled.png">
					</section>
                    <section>
						<h3>Typescript + Angular</h3>
                        <img src="images/typescript_angular_webstorm.png">
					</section>
					<section>
						<h3>Stylus</h3>
                        <img src="images/stylus.png">
					</section>
				</section>

                <section>
                    <h2>Performance matters</h2>
                    <img src="images/perf-matters.png">
                    <a href="https://www.youtube.com/watch?v=7ubJzEi3HuA">https://www.youtube.com/watch?v=7ubJzEi3HuA</a>
                </section>
                <section>
                    <h4>Bing experiment</h4>
                    <img src="images/bingdata1.png">
                </section>
                <section>
                    <section>
                        <h2>Things we do to improve performance</h2>
                        <ul>
                            <li>Use Content Delivery Network to server files from closest location</li>
                            <li>Reduce download size of scripts, styles and images</li>
                            <li>Bundle multiple files into one</li>
                            <li>Eagerly download only content "above the fold"</li>
                            <li>Use browser cache</li>
                        </ul>
                    </section>
                    <section>
                        <img src="images/aws-cloudfron-dyn-cdn.png">
                    </section>
                    <section>
                        <img src="images/booktrack-min.png">
                    </section>
                    <section>
                        <img src="images/booktrack-download.png">
                    </section>
                    <section>
                        <h3>Cache busted</h3>
                        <img src="images/cache-busting.png">
                    </section>
                </section>

                <section>
					<h2>How to do all this reliably?</h2>
                    <p>funny image</p>
				</section>

                <section>
					<h2>Using JavaScript and Node.js as CLI tool</h2>
                    <p>funny image</p>
				</section>

				<section>
					<h4>All Node build/integration tools are based on file matching configurations</h4>
                    <pre>
                        <code data-trim>
main: {
    src: ['app/**/*.ts', 'test/**/*.ts']
}
                        </code>
                    </pre>
				</section>

                <section>
                    <img src="images/grunt-logo.png">
                </section>
                <section>
                    <img src="images/grunt-setup.png">
                </section>

                <section>
                    <h2>Problem?</h2>
                    <p>Order of tasks execution</p>
                    FUNNY IMAGE
                </section>

                <section>
                    <img src="images/gulp-2x.png">
                </section>

                <section>
                    <img src="images/gulp-task.png">
                </section>

                <section>
                    <section style="font-weight: 800; color: white; background-color: rgba(10, 10, 10, 0.5)" data-background="images/cartman.jpg">
                        <h2 style="color: #ffffff">Deployment steps</h2>
                        <ol>
                            <li>Compile and minify stuff with Gulp</li>
                            <li>Put it in the CLOUD</li>
                            <li>???</li>
                            <li>PROFIT</li>
                        </ol>
                    </section>
                    <section>
                        <h3>Microsoft Azure has Node.js SDK</h3>
                        <img src="images/node-azure.png">
                    </section>
                    <section>
                        <h4>Checkout <a href="https://github.com/bestander/deploy-azure-cdn" target="_blank">github.com/bestander/deploy-azure-cdn</a></h4>
                        <img src="images/node-azure-deploy.png">
                    </section>
                </section>

                <section>
                    <h2>Final point</h2>
                    <ol>
                        <li class="fragment roll-in">Organize your project with your favorite preprocessors</li>
                        <li class="fragment roll-in">Use Node.js CLI to build deployment artifacts</li>
                        <li class="fragment roll-in">Use Node.js to deploy to CDN</li>
                    </ol>
                </section>

                <!-- CI section -->
                <section>
                    <section>
                        <h1>Continuous Delivery Pipeline</h1>
                        <h3>Team - Version Control - Build - Test (automate/manual) - Deployment (dev/production)</h3>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Team</h1>
                    </section>
                    <section>
                        <p>User Experience</p>
                        <p>User Interface</p>
                        <p>Dev team (CTO / front-end / back-end / native mobile)</p>
                    </section>
                </section>
                    <section>
                        <h3>Dev Challenges and Opportunities</h3>
                        <ul>
                            <li>Challenges:</li>
                            <li>
                                <ul>
                                    <li>Need to support multiple platform/browser</li>
                                    <li>Managing shared libraries</li>
                                    <li>Code conflicts</li>
                                    <li>New product (spin-off)</li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Dev Challenges and Opportunities</h3>
                        <ul>
                            <li>Opportunities:</li>
                            <li>
                                <ul>
                                    <li>Speedy decision making</li>
                                    <li>Moving stuff around is quick</li>
                                    <li>New technologies are easy to adopt</li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h3>Development Setup</h3>
                        <p>
                            <img src="images/git-logo.png" width="240px">
                        </p>
                    </section>
                    <section>
                        <h3>Development Workflow</h3>
                        <img src="images/gitflow.png" style="background-color: #ffffff">
                    </section>
                    <section>
                        <h2>Cont. Improvement</h2>
                        <p>pair programming (just started)</p>
                        <p>refactor early, refactor often, small stuff</p>
                    </section>
                    <section>
                        <h2>Run builds on local machine</h2>
                        <p><img src="images/obama-doubt-face.png" style="border: none; outline: none;"></p>
                        <p>really ?</p>
                    </section>
                    <section>
                        <h3><img src="images/gulp.png" style="background-color: transparent;height: 350px; border: none; outline: none;box-shadow: none"></h3>
                        <p>http://gulpjs.com/</p>
                    </section>
                    <section>
                        <h2>Run builds on local machine</h2>
                        <p>Compile TypeScript</p>
                        <p>Compile Stylus</p>
                        <p>Run tests</p>
                    </section>
                    <section>
                        <h3>Best way to check changes ?</h3>
                    </section>
                    <section>
                        <h3>Working on multiple platforms and browsers</h3>
                        <p><img src="images/3-screens.jpg" style="border:none;outline: none"></p>
                        <p>Chrome, Opera, Firefox</p>
                    </section>
                    <section>
                        <h3>Best way to check changes ?</h3>
                        <p><img src="images/idea-mrbean.jpg" style="border: none;outline: none;"></p>
                        <p>F5, ctrl + r, ⌘ + r</p>
                    </section>
                    <section>
                        <h3>There must be a better way</h3>
                    </section>
                    <section>
                        <h3>LiveReload (tiny-lr)</h3>
                        <ul>
                            <li>It will refresh the browser for you</li>
                            <li>Apply CSS without reloading the page</li>
                            <li>Suitable for build tools integration</li>
                        </ul>
                    </section>
                    <section>
                        <h3>Tiny-lr</h3>
                        <p>
                            <pre><code>     package.json

                                "dependencies": {
                                "tiny-lr": "0.0.5"
                                }</code></pre>
                        </p>
                        <p>
                            <pre><code>     index.html
                                ...
                                &lt;body&gt;
                                <script src="http://localhost:35729/livereload.js"></script>
                                &lt;/body&gt;
                                &lt;/html&gt;</code></pre>
                        </p>
                        <p>
                            <pre><code>     gulp.js

                                1. var tinylr = require('tiny-lr');
                                2. gulp.task('dev', function(){
                                3.    var lr = tinylr();
                                4.    lr.listen(35729);
                                5.    gulp.watch('/path/to/**/*.js', function(event){
                                6.        lr.changed({
                                7.            body: { files: [event.path] }
                                8.        });
                                9.    });
                                10. });</code></pre>
                        </p>
                    </section>
                    <section>
                        <h3>LiveReload in Action</h3>
                        <p>insert video</p>
                    </section>
                <section>
                    <h3>Testing</h3>
                    <p>
                        <img src="images/jasmine-test.png" style="background-color: white; width: 245px;">
                    </p>
                </section>
                <section>
                    <h3>Testing</h3>
                    <p>Sample Jasmine BDD code</p>
                    <p><pre><code>1. it("should validate empty first name", () => {
                    2.    var result:string[] = [];
                    3.    var csvData: string = "first name, last name, password \n" +
                    4.    ",Smith,somepassword";
                    5.
                    6.    result = this.csvService.parse(csvData);
                    7.
                    8.    expect(result.errors[0]).toEqual("There is some data missing in your
                    file for row(s) [1]. Update the file and upload again.");
                    9.    expect(result.students.length).toEqual(0);
                    10. });</code></pre></p>
                </section>
                <section>
                    <h3>Continuous Integration</h3>
                    <p><img src="images/codeship-logo.png" style="width: 450px;"></p>
                </section>
                <section>
                    <h3>CI w/ CodeShip</h3>
                    <p>
                        <img src="images/codeship-databases.png" style="width: 290px;">
                        <img src="images/codeship-languages.png" style="width: 222px;">
                    </p>
                    <p>Setup in minutes</p>
                </section>

                <section>
                    <h2>Importance of Automation</h2>
                    <p>save time & money</p>
                    <p>develop more rapidly</p>
                    <p>reduce integration problems</p>
                </section>

                <section>
                    <h2>Summary</h2>
                </section>

                <section>
                    <h3>OpenSource</h3>
                    <p>Grab the example from Github</p>
                    <p>https://github.com/booktrack/continuous-delivery-talk</p>
                </section>
                <section>
                    <h2>Thank you!</h2>
                </section>

			</div>

		</div>

		<script src="bower_components/reveal.js/lib/js/head.min.js"></script>
		<script src="bower_components/reveal.js/js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
//					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'bower_components/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
//					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
//					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
